# Program

## 어셈블러 언어와 고급 언어

![Program%20efc0a2f1869b4f60b53ff7e158e20473/Untitled_Diagram-3.svg](Program%20efc0a2f1869b4f60b53ff7e158e20473/Untitled_Diagram-3.svg)

**어셈블러 언어**

기계어는 0과 1의 나열이므로 CPU만 이해할 수 있지만 어셈블러 언어는 니모닉을 사용하여 읽었을 때 기계어에 비해 어느정도는 이해하기 쉽다. 다양한 종류의 CPU에서 사용할 수 없다. 니모닉은 CPU 고유의 명령을 그대로 반영하고 있기 때문이다. 기계어로의 변환이 쉬우므로 속도가 빠르다.

**고급 언어**

CPU의 구조를 고려할 필요가 없이 인간이 하고 싶은 일을 그대로 직관적으로 쓸 수 있다. 따라서 레지스터나 메모리 어드레스를 일일이 지정하지 않아도된다. 다양한 종류의 CPU에서 사용할 수 있다. 컴파일을 통해 기계어로 변환해야 하므로 속도가 느리다. 

## 프로그램의 기본

**연산**, **데이터 주고받기**, **조건 판단** 그리고 **분기** 명령을 조합하여 복잡한 프로그램을 만들 수 있다. 조건에 맞는지의 여부를 판단할 때는 스테이터스 레지스터의 플래그가 활용된다. 플래그 1개의 조건이라면 1 또는 0의 두가지 분기를 생각할 수 있다. 플래그 여러 개를 조합한 조건이라면 많은 분기를 만들 수 있다. 예를 들어 플래그 2개에 의한 조건이면 4가지 분기를 할 수 있다. 

또한 **조건 점프**를 활용하여 조건에 맞는 동안 루프하여 동일한 처리를 반복하는 **반복 처리**를 할 수 있다.

---

### 프로그램은 어디에 들어 있을까?

소형 장치에 쓰이는 마이컨의 경우 프로그램은 보통 ROM에 격납되어 있다. PC의 경우 OS의 기본적인 부분이 ROM에 들어 있는데 그 기본 부분을 사용하여 주변 기기의 하드디스크에서 OS를 RAM으로 호출하고, 애플리케이션 프로그램도 RAM에 격납하고 나서 실행된다.

오래전에는 소규모 모니터 프로그램이라 불리는 OS의 초미니어처판 같은 것을 준비한 후 어셈블러를 이용하여 프로그램을 한줄 한줄 개발했다. 현재는 어셈블러 개발이라고 해도 PC를 이용하여 개발된다.

개발 환경을 보면 각각의 CPU를 위해 만들어진 어셈블러 개발 도구가 CPU 제조사에서 공급되고 있다. 이 도구를 이용하여 PC에서 프로그램을 개발하고, PC에 접속한 ROM 라이터를 써서 ROM에 프로그램을 작성하고 그 ROM을 원하는 장치에 내장함으로써 장치가 완성된다.

최근에는 장치 안에 있는 불휘발성 메모리에 PC에서 개발된 프로그램을 직접 작성할 수 있게 되어 있다. 일일이 ROM에 쓰지 않아도 장치가 동작하는지 단시간에 확인할 수 있게 된 것이다.

프로그램용 ROM을 CPU에 연결한 채 직접 작성할 수 있는 방식을 **온보드 프로그래밍**이라고 한다.

### 프로그램이 실행되기까지의 흐름

1. 전원 ON
2. 전원 전압이 일정한 전압에 도달할 때까지 대기

    리셋 핀이라는 것을 통해서 아무 동작을 하지 않고 대기할 수 있게 만든다. 리셋 핀은 L상태로 있다가 일정한 전압에 도달하면 H상태로 변경된다. H상태가 된 후 CPU에 정해진 시간이 지난 후 리셋 상태를 개방한다.

3. 리셋 벡터를 읽는다.

    리셋 벡터는 CPU 어드레스 공간의 선두와 마지막 번지이며 프로그램 최초 명령의 어드레스를 가지고 있는다.